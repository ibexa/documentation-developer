{% set constants = constants(node) %}
{% set properties = properties(node) %}
{% set methods = methods(node) %}
{% set cases = cases(node) %}
{% set functions = node.functions|default([]) %}
{% set breadcrumbs = usesNamespaces ? breadcrumbs(node) : packages(node) %}
{% set mainFqcn = breadcrumbs|map(breadcrumb => breadcrumb.name)|join('\\') ~ '\\' ~ node.name %}

{% if packages|default([]) is not empty %}
    <h2 id="packages">
        Packages
        {%- include 'components/anchor.html.twig' with { anchor_link: link(node) ~ '#packages' } -%}
    </h2>
    <ul class="namespace-list">
        {% for package in packages %}
            {% set fqcn = mainFqcn ~ '\\' ~ package.name %}

            <li>
                <span>
                    <img src="./images/arrow-right.svg" class="arrow" />
                    <a href="{{ link(package) }}">
                        {{ package.name }}
                    </a>
                    <img src="./images/copy.svg" alt="copy" class="copy-to-clipboard" data-copy-value="{{ fqcn }}" title="Copy FQCN" />
                </span>
            </li>
        {% endfor %}
    </ul>
{% endif %}

{% if namespaces|default([]) is not empty %}
    <h2 id="namespaces">
        Namespaces
        {%- include 'components/anchor.html.twig' with { anchor_link: link(node) ~ '#namespaces' } -%}
    </h2>
    <ul class="namespace-list">
        {% for namespace in namespaces %}
            {% set fqcn = mainFqcn ~ '\\' ~ namespace.name %}

            <li>
                <span>
                    <img src="./images/arrow-right.svg" class="arrow" />
                    <a href="{{ link(namespace) }}">
                        {{ namespace.name }}
                    </a>
                    <img src="./images/copy.svg" alt="copy" class="copy-to-clipboard" data-copy-value="{{ fqcn }}" title="Copy FQCN" />
                </span>
            </li>
        {% endfor %}
    </ul>
{% endif %}

{% set joined_data = [] %}
{% if node.interfaces[0] is defined %}
    {% set joined_data = joined_data|merge(node.interfaces) %}
{% endif %}
{% if node.classes[0] is defined %}
    {% set joined_data = joined_data|merge(node.classes) %}
{% endif %}
{% if node.traits[0] is defined %}
    {% set joined_data = joined_data|merge(node.traits) %}
{% endif %}

{% if joined_data is not empty %}
    <h2 id="interfaces">
        Interfaces, classes, and traits
        {%- include 'components/anchor.html.twig' with { anchor_link: link(node) ~ '#interfaces' } -%}
    </h2>
    <ul class="namespace-list">
        {% for entry in joined_data %}
            {% set fqcn = mainFqcn ~ '\\' ~ entry.name %}

            <li>
                <span>
                    <img src="./images/arrow-right.svg" class="arrow" />
                    <a href="{{ link(entry) }}">
                        {{ entry.name }}
                    </a>
                    <img src="./images/copy.svg" alt="copy" class="copy-to-clipboard" data-copy-value="{{ fqcn }}" title="Copy FQCN" />
                </span>
                {%- if entry.summary -%}
                    <p>{{ entry.summary }}</p>
                {%- endif -%}
            </li>
        {% endfor %}
    </ul>
{% endif %}
