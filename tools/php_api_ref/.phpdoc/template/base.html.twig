{% extends 'layout.html.twig' %}

{% block javascripts %}
    {{ parent() }}

    <script>
        window.addEventListener('load', function () {
            const fullPath = document.location.pathname.split('/');
            const pageUrl = fullPath.slice(-2).join('/');
            let activeElement = document.querySelector(`a[href="${pageUrl}"]`);
            let guardian = 0;

            activeElement = activeElement?.closest('.md-nav__item')?.querySelector('.md-nav__toggle');

            while(activeElement) {
                activeElement.checked = true;
                guardian++;

                activeElement = activeElement.closest('.md-nav__item')?.closest('.md-nav')?.closest('.md-nav__item')?.querySelector('.md-nav__toggle');
            
                if (guardian > 20) {
                    break; // just to be safe from infinity loops
                }
            }
        });
    </script>
{% endblock %}
